<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	{include file="public:top"}
	<block name="topCss">
		<!--DataTables css-->
		<link rel="stylesheet" href="__STATIC__/plugins/Datatable/css/dataTables.bootstrap4.css">

		<!--iCheck css-->
		<link rel="stylesheet" href="__STATIC__/plugins/iCheck/all.css">
	</block>
</head>

<body class="app ">

<div id="spinner"></div>

<div id="app">
	<div class="main-wrapper" >
		{include file="public:header"}
		{include file="public:menu"}
		<block name="bodsy">
			<div class="app-content">
				<section class="section">
					<ol class="breadcrumb">
				        <li class="breadcrumb-item"><a href="{:url('index/index')}">首页</a></li>
				        <li class="breadcrumb-item active" aria-current="page">管理员页面</li>
				    </ol>

					<div class="row">
						<div class="col-lg-12">
							<div class="card">
								<div class="card-header">
									<form class="float-right">
											<div class="input-group">
												<input type="text" class="form-control" placeholder="Search">
												<div class="input-group-btn">
													<button class="btn btn-primary"><i class="ion ion-search"></i></button>
												</div>
											</div>
										</form>	
									<h4>管理员列表</h4>
								</div>
								<div class=" col-lg-12" style="margin-top:20px;margin-bottom: -10px;">
									<div class="float-left" style="margin-right: 10px;">
										<a href="{:url('admin/add')}" class="btn btn-primary">添加管理员</a> 
									</div>
									<div class="float-left">
										<a href="{:url('admin/add')}" class="btn btn-danger" >批量删除</a> 
									</div>
									<div class="float-right col-lg-4">
										
									</div> 
									
								</div>
								<div class="card-body">

									<div class="table-responsive" >
										
										<!-- <div class="search-element " style="float: left;">
											<input class="form-control" type="search" placeholder="Search" aria-label="Search">
											<button class="btn btn-primary" type="submit"><i class="ion ion-search"></i></button>
										</div> -->
									</div>
									
									<div class="table-responsive">
									<table id="example" class="table table-striped table-bordered border-t0 text-nowrap w-100" >
										<thead>
											<tr>
												<th class="row-selected">
													<input class="minimal" type="checkbox"  onclick="selectAll(this)" id="checkall">
													<label for="checkall">全选</label>
												</th>
												<th class="wd-15p">ID</th>
												<th class="wd-15p">用户名</th>
												<th class="wd-15p">性别</th>
												<th class="wd-20p">邮箱</th>
												<th class="wd-15p">是否禁用</th>
												<th class="wd-10p">创建时间</th>
												<th class="wd-25p">上次登录时间</th>
												<th class="wd-25p">上次登录IP地址</th>
												<th class="wd-25p">操作</th>
											</tr>
										</thead>
										<tbody>
											{volist name='users' id="vo"}
											<tr>
												<td>
													<input type="checkbox" class="minimal" name="choice" value="{$vo.id}">
												</td>
												<td>{$vo.id}</td>
												<td>{$vo.name}</td>
												<td>{$vo.sex}</td>
												<td>{$vo.email}</td>
												<td>
													{if condition="$vo['status'] eq  '正常'"}
													<div class="badge badge-success">{$vo.status}</div>
													{else/}
													<div class="badge badge-warning">{$vo.status}</div>
													{/if}
												</td>
												<td>{$vo.create_time}</td>
												<td>
													{if condition="$vo['last_login_time'] eq 0"}
													暂无登录
													{else/}
													{$vo.last_login_time|(date="Y-m-d H:s:m",###)}
													{/if}
												</td>
												<td>{$vo.last_login_ip}</td>
												<td>
													{if condition="$vo['status'] neq  '正常'"}
													<a href="{:url('admin/store?method=start&&id='.$vo['id'])}" class="btn btn-sm btn-info  m-b-5 m-t-5 ajax-get">开启</a>
													{else/}
													
													<a href="{:url('admin/store?method=stop&&id='.$vo['id'])}" class="btn btn-sm btn-warning m-b-5 m-t-5 ajax-get">禁用</a>
													{/if}
													<div class="btn-group align-top">
														<a href="#" class="btn btn-sm btn-primary m-b-5 m-t-5">编辑</a>
													</div>
													<div class="btn-group align-top">
														<a href="{:url('admin/delete?id='.$vo['id'])}" class="btn btn-sm btn-danger m-b-5 m-t-5 ajax-get"><i class="fa fa-trash"></i></a>

													</div>
												</td>
											
											</tr>
											{/volist}
										</tbody>
									</table>
								</div>
								<div id="page" class="page">
										{$page|raw}
									</div>
								</div>
							</div>
						</div>
					</div>

				</section>
			</div>
			
		</block>
	</div>
</div>
<script>
	function selectAll(choiceBtn){
                
        //document.getElementsByTagName()
	    var arr=document.getElementsByName("choice");
		    for(var i=0;i<arr.length;i++){
		        arr[i].checked=choiceBtn.checked;//循环遍历看是否全选
		    }
	    }
</script>
{include file="public:js"}
<block name="js">
	<!--DataTables css-->
	<script src="__STATIC__/plugins/Datatable/js/jquery.dataTables.js"></script>
	<script src="__STATIC__/plugins/Datatable/js/dataTables.bootstrap4.js"></script>

	<!--iCheck js-->
	<script src="__STATIC__/plugins/iCheck/icheck.min.js"></script>
</block>
</body>
</html>